/* :root — только глобальные цвета */
:root{
  --primary:#f7d74f;
  --primary-dark:#d4b800;
  --text:#0f172a;
  --muted:#6b7280;
  --border:#e5e7eb;
  --surface:#ffffff;
  --danger:#ef4444;
  --danger-weak:rgba(239,68,68,.06);
}

/* Изоляция блоком .staff — ничего не утечёт */
.staff{
  /* локальные токены блока */
  --radius:12px;
  --shadow:0 4px 16px rgba(0,0,0,.05);

  background:var(--surface);
  border-radius:var(--radius);
  padding:24px;
  box-shadow:var(--shadow);
  display:flex;
  flex-direction:column;
  gap:20px;
  color:var(--text);

  /* Header */
  &__header{
    display:flex; justify-content:space-between; align-items:flex-end;
    flex-wrap:wrap; gap:12px;
  }
  &__title{ font-size:20px; font-weight:700; margin:0; color:var(--text); }
  &__subtitle{ font-size:13px; color:var(--muted); margin:.25rem 0 0; }

  /* Actions */
  &__actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

  /* Search */
  &__search{ position:relative; }
  &__search-input{
    width:260px; padding:10px 12px 10px 32px; border-radius:10px;
    border:1px solid var(--border); font-size:14px; background:#fff;
    transition:border-color .15s ease;
    &:focus{ outline:none; border-color:var(--primary); }
  }
  &__search-icon{
    position:absolute; left:10px; top:50%; transform:translateY(-50%);
    font-size:14px; color:var(--muted); pointer-events:none;
  }

  /* Buttons */
  &__btn{
    display:inline-flex; align-items:center; gap:6px; padding:10px 14px;
    border-radius:10px; font-size:14px; font-weight:600; cursor:pointer;
    transition:background-color .15s ease, filter .15s ease, transform .05s ease;
    border:1px solid transparent; background:transparent; color:var(--text);
    &:hover{ filter:brightness(.98); }
    &:active{ transform:translateY(1px); }
    &:disabled{ opacity:.6; pointer-events:none; }

    &--primary{ background:var(--primary); color:#111; }
    &--primary:hover{ background:var(--primary-dark); }

    &--secondary{ border:1px solid var(--border); background:#fff; }
    &--secondary:hover{ background:#f9fafb; }

    &--danger{ border:1px solid var(--danger); color:var(--danger); background:transparent; }
    &--danger:hover{ background:var(--danger-weak); }
  }

  /* List & Cards */
  &__list{ display:grid; gap:10px; }
  &__card{
    display:flex; justify-content:space-between; align-items:stretch; gap:12px;
    padding:14px; border:1px solid var(--border); border-radius:var(--radius);
    background:#fafafa; transition:background .15s ease;
    &:hover{ background:#f1f5f9; }
  }
  &__card-left{ display:flex; gap:12px; align-items:flex-start; min-width:0; }

  &__avatar{
    min-width:40px; width:40px; height:40px; border-radius:50%;
    background:linear-gradient(135deg,var(--primary),var(--primary-dark));
    color:#fff; font-weight:700; font-size:14px; display:grid; place-items:center;
    box-shadow:var(--shadow); user-select:none;
  }

  &__name{
    font-size:16px; font-weight:600; margin:0 0 4px; color:var(--text);
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  &__muted{ color:var(--muted); font-weight:500; }
  &__meta{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; color:var(--muted); font-weight:500; }

  /* Alerts */
  &__alert{
    padding:10px 12px; border-radius:10px; font-size:14px;
    background:rgba(231,76,60,.12); color:#e74c3c; border:1px solid rgba(231,76,60,.35);
  }

  /* Modal (центр по экрану + комфорт внутри) */
  &__modal-overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.5);
    /* надёжная центровка */
    display:grid; place-items:center; z-index:50;
    padding:12px; /* «воздух» по краям на мобильных */
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
  }
  &__modal{
    background:#fff; border-radius:16px; padding:20px;
    width:min(720px, calc(100vw - 24px));
    max-height:min(90vh, 760px);
    overflow:auto; box-shadow:0 24px 64px rgba(0,0,0,.18), 0 4px 16px rgba(0,0,0,.08);
    -webkit-overflow-scrolling:touch;
    animation:staff-fade .18s ease;
  }
  @keyframes staff-fade{ from{opacity:0; transform:translateY(-8px);} to{opacity:1; transform:translateY(0);} }

  &__modal-header{
    display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;
    position:sticky; top:0; background:#fff; padding-bottom:8px; margin-top:-8px;
    /* визуальное отделение шапки, когда много контента */
    box-shadow:0 1px 0 0 var(--border);
    z-index:1;
  }
  &__modal-title{ font-size:18px; font-weight:700; margin:0; color:var(--text); }
  &__icon-btn{
    background:none; border:none; cursor:pointer; font-size:18px; color:var(--muted);
    padding:6px; border-radius:8px;
    &:hover{ color:var(--text); background:#f3f4f6; }
  }

  /* Form */
  &__form{
    margin-top:12px;
    display:flex; flex-direction:column; gap:16px;
    /* внутренние отступы + безопасная зона снизу на iOS */
    padding-bottom:calc(4px + env(safe-area-inset-bottom));
  }
  &__form-grid{ display:grid; grid-template-columns:1fr 1fr; gap:14px; }
  &__field{ display:flex; flex-direction:column; gap:6px; }
  &__field--full{ grid-column:1 / -1; }
  &__label{ font-size:14px; font-weight:600; color:var(--muted); }
  &__req{ color:var(--danger); font-weight:700; }
  &__input, &__textarea{
    padding:10px; border:1px solid var(--border); border-radius:8px; font-size:14px; background:#fff;
    transition:border-color .15s ease, box-shadow .15s ease;
    &:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 3px rgba(247,215,79,.25); }
  }
  &__form-actions{ display:flex; align-items:center; gap:10px; justify-content:flex-end; }

  /* Responsive */
  @media (max-width:720px){
    &__form-grid{ grid-template-columns:1fr; }
    &__search-input{ width:100%; }
    &__card{ flex-direction:column; }
  }

  /* удобочитаемый стек элементов панели действий */
  @media (max-width:560px){
    &__actions{ width:100%; flex-direction:column; align-items:stretch; }
    &__btn{ width:100%; justify-content:center; }
    &__form-actions > .staff__btn{ width:100%; justify-content:center; }
  }

  @media (max-width:400px){
    padding:18px;
    &__title{ font-size:18px; }
    &__btn{ padding:9px 12px; }
    &__input{ padding:9px 10px; }
  }

  /* Уверенная работа до 320px */
  @media (max-width:320px){
    padding:16px;
    &__actions{ gap:8px; }
    &__card{ padding:12px; }
    &__avatar{ min-width:36px; width:36px; height:36px; }
    &__search-input{ padding:9px 10px 9px 30px; }
    &__modal{ padding:16px; border-radius:14px; }
    &__modal-title{ font-size:17px; }
  }
}
